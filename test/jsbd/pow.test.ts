import { JSBD } from '../../src/jsbd'

let t = (a: any, b: any, expected: any, roundOption?: any) => {
  test(a.toString() + ' ^ ' + b.toString(), () => {
    let a1 = JSBD.BigDecimal(a)
    let res = JSBD.pow(a1, b, roundOption)
    let expectedV = JSBD.BigDecimal(expected)
    expect(res.toString()).toBe(expectedV.toString())
  })
}

test('"100" pow 2', () => {
  let a = JSBD.BigDecimal('100')
  let b = 2
  expect(JSBD.pow(a, b).toString()).toBe('10000')
})

test('"0.2" pow 3', () => {
  let a = JSBD.BigDecimal('0.2')
  let b = 3
  expect(JSBD.pow(a, b).toString()).toBe('0.008')
})

test('"1.2" pow 3', () => {
  let a = JSBD.BigDecimal('1.2')
  let b = 3
  expect(
    JSBD.pow(a, b, {
      maximumFractionDigits: 1,
      roundingMode: 'half up',
    }).toString()
  ).toBe('1.7')
})

test('2 pow 300', () => {
  let a = JSBD.BigDecimal('2')
  let b = 300
  expect(JSBD.pow(a, b).toString()).toBe('2037035976334486086268445688409378161051468393665936250636140449354381299763336706183397376')
})

test('"0.2" pow 3', () => {
  let a = JSBD.BigDecimal('0.2')
  let b = '54'

  expect(() => {
    // @ts-ignore
    JSBD.pow(a, b)
  }).toThrowError()
})

t('-94', 9, '-572994802228616704')
t('8635.1', 7, '3579905803475905082101292904.0251951')
t('8', 2, '64')
t('811282', 1, '811282')
t('-4779843.8', 4, '521981148152789432556692514.4336')
t('9.7', 9, '760231058.654565217')
t('0.6', 3, '0.216')
t('-352', 6, '1902199139467264')
t('186', 8, '1432529432742502656')
t('8546044', 4, '5334091951071562339389604096')
t('-373627', 2, '139597135129')
t('-32.8', 8, '1339648153128.12507136')
t('-539753718.1', 9, '-3888309119645000465579846843945503482876856445430084950634976909283939919106692.668569021')
t('-3', 5, '-243')
t('-62', 2, '3844')
t('140859', 6, '7811017400668440697372813928841')
t('3304', 4, '119168138285056')
t('7803439', 4, '3708037855807343029122411841')
t('-469162.9', 3, '-103269241281751651.189')
t('2718500.4', 6, '403623465979414073227160925140333191024.644096')
t('6466414.6', 7, '472764463676289203315859561556028230804768070427.5852416')
t('-336880', 2, '113488134400')
t('-5496', 8, '832479969061926382860591169536')
t('8', 9, '134217728')
t('-2673400', 7, '-975995029706847136422507126054400000000000000')
t('-11396636', 7, '-24971046431812299866675036812698523386978083127296')
t('685', 2, '469225')
t('49485983', 4, '5996927609909407724135365211521')
t('-3207949.8', 3, '-33012825071894338453.992')
t('45047695', 1, '45047695')
t('-6513', 2, '42419169')
t('-675.8', 3, '-308641671.512')
t('-5982', 4, '1280517844136976')
t('775717', 4, '362087253603663657799921')
t('-2603878', 2, '6780180638884')
t('9479.6', 2, '89862816.16')
t('-4961216', 9, '-1820929873020771075033432769788705651740549559727457394753536')
t('-138786', 9, '-19103411506274389826177996727667105440292348416')
t('0.9', 8, '0.43046721')
t('29', 6, '594823321')
t('10662301', 4, '12924202513795658277458389201')
t('-454583', 7, '-4011366404601865329810437221926385213127')
t('9.4', 9, '572994802.228616704')
t('-0.9', 7, '-0.4782969')
t('254.7', 6, '273006929046048.070329')
t('643445.8', 6, '70969512592520309435815230045325555.207744')
t('31221366', 8, '902849170699529265044981362005111644772496263201155488932096')
t('12746', 4, '26393419258986256')
t('-68041.4', 5, '-1458364905352801456198821.69824')
t('-41000482', 3, '-68923430754575963980168')
t('6079625', 4, '1366177626581117519775390625')
t('-44', 4, '3748096')
t('38.9', 6, '3464955073.649161')
t('-516453739.1', 4, '71141940032357960606490567924274230.8161')
t('-693417.8', 8, '53451498646457438168225947552168375824236948505.71796736')
t('518.2', 6, '19363526396818225.090624')
t('26893852', 9, '7359987812098715562228344022855020818061242623502705053609865510912')
t('961757928', 7, '761132777605253068610617334018561050937151898474112662175219712')
t('474.5', 2, '225150.25')
t('-122124453.8', 9, '-6042598091644825916918508983734536062880112018882106646000233657355144520.093710848')
t('8.2', 5, '37073.98432')
t('-8912159.4', 2, '79426585171008.36')
t('0.6', 6, '0.046656')
t('-389', 5, '-8907339520949')
t('16.7', 1, '16.7')
t('-697877408', 9, '-39265601474087338309687333993135564880913747691362304114711652475719454008803328')
t('-95', 9, '-630249409724609375')
t('-5379478.4', 2, '28938787856066.56')
t('24568.1', 7, '5402577407110554133123457086604.1150161')
t('39', 7, '137231006679')
t('1512645.1', 8, '27409199950277466440840437811968006189114814727069.90381601')
t('-8', 6, '262144')
t('-57.2', 2, '3271.84')
t('1934', 8, '195727458997645823181373696')
t('648415494.8', 4, '176772025215724503928674063484534235.1616')
t('79083', 2, '6254120889')
t('1622', 9, '77706553794723018367862216192')
t('8778.4', 1, '8778.4')
t('83', 3, '571787')
t('-89', 2, '7921')
t('0', 2, '0')

t('275', 7, '118940252685546875', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('41579362.7', 3, '71884206885635893074382.9', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-647.5', 5, '-113814832548730.5', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-674724', 5, '-139839799188946358390975898624', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('9640.3', 2, '92935384.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('350436.3', 6, '1852057721048399463142707612890102.7', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('575909046.4', 3, '191012461629445887042421817.3', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('272524', 5, '1503224251399594386052762624', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-6872.2', 2, '47227132.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-32139110', 6, '1102054510429878113235327102467106774961000000', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-5307103', 6, '22343185895354689413262558658265325902529', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-32442355', 2, '1052506397946025', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-78.8', 9, '-117148291017723218.5', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-297.2', 7, '-204805509568726665.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-0.6', 6, '0', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-39158067', 7, '-141172048266079446750620047557245721472998305635519323', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-6', 3, '-216', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-354189.3', 4, '15737717612837169193785.6', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-24', 6, '191102976', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('10', 8, '100000000', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-2171', 5, '-48227985011979851', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('21318.5', 3, '9688798671106.6', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('5.9', 6, '42180.5', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-389849080', 7, '-1368597037896578731238860416078798922946885759107563520000000', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('580734.9', 5, '66052556538555770506564509488.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('2367091.6', 7, '416394946252328475728396946112331370799572677.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('0.8', 4, '0.4', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-575.5', 2, '331200.3', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('52', 9, '2779905883635712', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-3251914.8', 1, '-3251914.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-815', 5, '-359573803259375', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-1767', 5, '-17225932755353607', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('0.6', 4, '0.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('400942607', 3, '64453518407061558104522543', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-67.6', 2, '4569.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('52.9', 5, '414265112.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-6234148', 3, '-242287676377315849792', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('228', 9, '1664997642832198238208', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('460964394', 4, '45151223467598485004213146260519696', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-743911.5', 8, '93792946530720522555683776435361324240817393117.5', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-8757050', 5, '-51497855819312838866159906562500000', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('0.7', 8, '0.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-5745381.6', 8, '1187274208463231592495618977886318675235160669763747252.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-696984.9', 4, '235989933169677061644600.6', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-1.8', 2, '3.2', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-258456736', 5, '-1153291993444619603078692591153649262002176', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('5.8', 9, '7427658.7', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('15376', 2, '236421376', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('28971.7', 6, '591349013666464850902090942.9', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('54989.2', 3, '166277009244340.3', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('9', 8, '43046721', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('2184', 8, '517631947192959834255261696', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-860692', 6, '406524381468799939872902874325356544', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('70812.2', 7, '8928049944319323496764630126705221', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('7.7', 1, '7.7', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('5', 9, '1953125', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('97921523', 4, '91941722997688018644453625341841', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('5.8', 8, '1280630.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('23747.1', 6, '179334351432050411834305801.2', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('1015.7', 1, '1015.7', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('66273.8', 9, '24664757818749059348133820408749907172075545.2', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('389', 9, '203960661546169565063909', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('92081974.6', 6, '609603907646311653080498757156888664029473619948.5', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-399871449', 8, '653676950375543041161341796656311728021939274674790332946475318398401', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('73440.2', 4, '29089442873914253614.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-51.1', 3, '-133432.8', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('6', 4, '1296', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-423281902.1', 6, '5751461284164151600563697938397903681742896060032565.1', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('0.7', 3, '0.3', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-620', 1, '-620', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-605524979.7', 6, '49293809535633394012576211203635087937822781671537814.4', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('-5471378.2', 2, '29935979407435.2', { maximumFractionDigits: 1, roundingMode: 'half up' })
t('445807', 2, '198743881249', { maximumFractionDigits: 1, roundingMode: 'half up' })
